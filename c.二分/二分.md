## 3 äºŒåˆ†æŸ¥æ‰¾

### 3.1 æœç´¢æ¨¡æ¿

* [AcWing](https://www.acwing.com/blog/content/31/)

```java
int l = 0, r = nums.length - 1;

//å°†åŒºé—´åˆ†ä¸º[l, mid] å’Œ [mid + 1, r]
int binarySearch1(int l, int r) {
  	while(l < r) {
      	int mid = l + (r - l) / 2;
      	if(check(mid)) r = mid;
      	else l = mid + 1;
    }
  	return l;
}

//å°†åŒºé—´åˆ†ä¸º[l, mid - 1] å’Œ [mid, r]
int binarySearch2(int l, int r) {
  	while(l < r) {
      int mid = (l + r + 1) / 2;//+1é˜²æ­¢æ­»å¾ªç¯ï¼Œä¸¤æ•°ç›¸åŠ é™¤ä»¥2æ˜¯ä¸‹å–æ•´ï¼Œï¼ˆ1+2/2 =1,ä¼šæ­»å¾ªç¯
      if(check(mid)) l = mid;
      else r = mid - 1;
    }
  return l;
}
```

> å†™æ—¶å€™æ˜¯çœ‹l=midè¿˜æ˜¯r=midï¼Œå¦‚æœl=midï¼Œåœ¨midå¤„+1ï¼›



* [labuladong](https://mp.weixin.qq.com/s/M1KfTfNlu4OCK8i9PSAmug)

```java
int binarySearch(int[] nums, int target) {
    int left = 0, right = nums.length - 1; 
    while(left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1; 
        } else if(nums[mid] == target) {
            // ç›´æ¥è¿”å›
            return mid;
        }
    }
    // ç›´æ¥è¿”å›
    return -1;
}

int leftBound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // åˆ«è¿”å›ï¼Œé”å®šå·¦ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // æœ€åè¦æ£€æŸ¥ left è¶Šç•Œçš„æƒ…å†µ
    if (left >= nums.length || nums[left] != target)
        return -1;
    return left;
}


int rightBound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ
            left = mid + 1;
        }
    }
    // æœ€åè¦æ£€æŸ¥ right è¶Šç•Œçš„æƒ…å†µ
    if (right < 0 || nums[right] != target)
        return -1;
    return right;
}
```



> labuladongçš„æ¨¡æ¿æ¥è¯´ï¼Œå¯»æ‰¾å·¦å³è¾¹ç•Œçš„æƒ…å†µï¼Œåœ¨å…·ä½“é¢˜ç›®ä¸­çš„ä½“ç°ä¸æ˜¯ç‰¹åˆ«æ˜æ˜¾(æœ‰çš„é¢˜ç›®è¡¨è¿°ï¼Œä½ ä¸çŸ¥é“éœ€è¦æŸ¥çš„å·¦è¾¹ç•Œè¿˜æ˜¯å³è¾¹ç•Œ)ï¼Œæœ‰çš„æ—¶å€™ç†è§£ä¸æ¸…å¯ä»¥åœ¨åˆ†åˆ«å°è¯•ä¸€ä¸‹å·¦è¾¹ç•Œå³è¾¹ç•Œï¼ˆä»…é™ç¬”è¯•ï¼‰



### 3.2 é¢˜ç›®

**[Leetcode 15 ä¸‰æ•°ä¹‹å’Œ](https://leetcode-cn.com/problems/3sum/)**

```java
class Solution {
    public List<List<Integer>> threeSum(int[] nums) {
        int len = nums.length;
        List<List<Integer>> res = new ArrayList<>();
        if(len < 3) return res;
        Arrays.sort(nums);
        for(int i = 0; i < len - 2; ++i) {
            if(i > 0 && nums[i] == nums[i - 1]) continue;
            int l = i + 1, r = len - 1;
            while(l < r) {
                int sum = nums[i] + nums[l] + nums[r];
                if(sum == 0) {
                    List<Integer> tmp = new ArrayList<>();
                    tmp.add(nums[i]);
                    tmp.add(nums[l]);
                    tmp.add(nums[r]);
                    res.add(tmp);
                    while(l < r && nums[l] == nums[++l]);
                    while(l < r && nums[r] == nums[--r]);
                }else if(sum < 0) {
                    while(l < r && nums[l] == nums[++l]);
                }else {
                    while(l < r && nums[r] == nums[--r]);
                }
            }
        }
        return res;
    }
}
```

> è¿™é¢˜å¾ˆæ£’ï¼Œæˆ‘ç‰¹åˆ«å–œæ¬¢ :) ã€‚
>
> * æ’åºåä»¥å·¦åŸºç‚¹æ’åºï¼Œä¹‹ååé¢åŒºé—´äºŒåˆ†æŸ¥æ‰¾ã€‚
> * è¿™é“é¢˜è¦æ±‚ä¸èƒ½åŒ…å«é‡å¤ç‚¹ã€‚å»é‡è¿™ä¸ªå†™æ³•å¤ªå¦™äº†ã€‚ä¾‹å¦‚æ’åºåçš„nums = [-4,-1,-1,0,1,2]ï¼Œå½“ l = 1æ—¶ï¼Œnums[l] = -1, nums[l + 1] = -1, nums[r] = 2, sum < 0, éœ€è¦å°†lå³ç§»ï¼Œç”±äºnums[i] == nums[i + 1] é‡å¤ï¼Œç›´æ¥å°±æŠŠnums[l] æ›´æ–°ä¸ºæ–°å€¼0äº†ã€‚ç§’ ï¼ ;) 



* [AcWingäºŒåˆ†è®²è§£](https://www.bilibili.com/video/av35162983?from=search&seid=594453792093447226&spm_id_from=333.337.0.0)



#### 3.2.1 å·¦å³è¾¹ç•Œæœç´¢

**[Leetcode 69 sqrt(x)](https://leetcode-cn.com/problems/sqrtx/)**

```java
class Solution {
    public int mySqrt(int x) {
        if(x < 2) return x;
        long l = 1, r = x;
        while(l < r) {
            long mid = l + (r - l + 1) / 2;
            long tmp = mid * mid;
            if(tmp > x) {
                r = mid - 1;
            }else if(tmp < x){
                l = mid;
            }else {
                return (int) mid;
            }
        }
        return (int)l;
    }
}


class Solution {
  public int mySqrt(int x) {
    long l = 0, r = x;
    while(l < r) {
      long mid = l + (r - l) / 2;
      long tmp = mid * mid;
      if(tmp >= x) r = mid;//è¿™é‡Œæ˜¯æ±‚å¤§äºç­‰äºxçš„ä¸Šå–æ•´ï¼Œè€Œé¢˜ç›®è¦æ±‚æ˜¯ä¸‹å–æ•´ã€‚æ‰€ä»¥åšå‡ºæ›´æ”¹
      else l = mid + 1;
    }
    return (int)l;
  }
}

class Solution {
  public int mySqrt(int x) {
    long l = 0, r = x;
    while(l < r) {
      long mid = l + (r - l + 1) / 2;
      long tmp = mid * mid;
      if(tmp <= x) l = mid;
      else r = mid - 1;
    }
    return (int)l;
  }
}
```

> äºŒåˆ† === é­”é¬¼



**[Leetcode 34 æ’åºæ•°ç»„ç›®æ ‡å€¼çš„å·¦å³è¾¹ç•Œ - Medium](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/)**

```java
class Solution {
    private int searchLeft(int[] nums, int t) {
        int l = 0, r = nums.length - 1;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] >= t) r = mid;//å½“å‰å€¼æ»¡è¶³äº†ï¼Œè¦æ‰¾å·¦ç«¯ç‚¹ï¼Œæ‰€ä»¥å³åŠè¾¹æ’é™¤
            else l = mid + 1;
        }
        return nums[l] == t ? l : -1;
    }
    
    private int searchRight(int[] nums, int t) {
        int l = 0, r = nums.length - 1;
        while(l < r) {
            int mid = l + (r - l + 1) / 2;
            if(nums[mid] <= t) l = mid;//å½“å‰å€¼æ»¡è¶³äº†ï¼Œè¦æ‰¾å³ç«¯ç‚¹ï¼Œæ‰€ä»¥å·¦åŠè¾¹æ’é™¤
            else r = mid - 1;
        }
        return nums[r] == t ? r : -1;
    }
    
    public int[] searchRange(int[] nums, int t) {
        if(nums == null || nums.length == 0) return new int[]{-1, -1};
        int l = 0, r = nums.length - 1;
        int[] res = new int[2];
        res[0] = searchLeft(nums, t);
        if(res[0] == -1) res[1] = -1;
        else res[1] = searchRight(nums, t);
        return res;
    }
}



class Solution {
    public int[] searchRange(int[] nums, int target) {
        if(nums.length == 0 ) return new int[]{-1, -1};
        int[] res = new int[2];
        res[0] = binSearch(nums, target, true);
        res[1] = binSearch(nums, target, false);
        return res;
    }

    private int binSearch(int[] nums, int target, boolean leftOrRight){
        int left = 0, right = nums.length - 1;
        while(left <= right){
            int mid = left + (right - left) / 2;
            if(nums[mid] > target){
                right = mid - 1;
            }else if(nums[mid] < target){
                left = mid + 1;
            }else{
                if(leftOrRight){
                    right = mid - 1;//ç”±äºè·³å‡ºæ¡ä»¶ï¼Œæ‰€ä»¥å¿…é¡»ç§»åŠ¨ï¼Œå¦åˆ™æ­»å¾ªç¯
                }else{
                    left = mid + 1;//åŒä¸Š
                }
            }
        }
        if(leftOrRight){
            if(left >= nums.length || nums[left] != target){
                return -1;
            }
            return left;
        }else{
            if(right < 0 || nums[right] != target){
                return -1;
            }
            return right;
        }        
    }
}
```

> æœç´¢å·¦å³è¾¹ç•Œçš„ç»å…¸ã€‚
>
> å·¦è¾¹ç•Œå°±æ˜¯ç¬¬ä¸€ä¸ªå¤§äºç­‰äºç›®æ ‡å€¼çš„æ•°
>
> å³è¾¹ç•Œå°±æ˜¯æœ€åä¸€ä¸ªå°äºç­‰äºç›®æ ‡çš„æ•°ï¼Œå¤§äºçš„è‚¯å®šä¸å¯¹ï¼Œæ‰€ä»¥å…ˆèˆå»å³è¾¹ã€‚



**[Leetcode 35 æœç´¢æ’å…¥ä½ç½® - Easy](https://leetcode-cn.com/problems/search-insert-position/)**

```java
class Solution {
    public int searchInsert(int[] nums, int t) {
        int len = nums.length, l = 0, r = len - 1;
        if(nums[len - 1] < t) return len;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] >= t) r = mid;
            else l = mid + 1;
        }
        return l;
    }
}
```

> æœ¬é¢˜æ˜¯æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtargetçš„ä½ç½®ï¼Œç”±äºå³è¾¹ç•Œçš„å®šä¹‰é—®é¢˜ï¼Œå½“targetæ¯”numsä¸­æœ€å¤§çš„æ•°è¿˜å¤§æ—¶ï¼Œæ— æ³•æ–°å¢ä½ç½®ï¼Œæ•…è¦åŠ ä¸€ä¸ªç‰¹åˆ¤ã€‚

```java
class Solution {
    public int searchInsert(int[] nums, int t) {
        int len = nums.length, l = 0, r = len;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] >= t) r = mid;
            else l = mid + 1;
        }
        return l;
    }
}
```

> ç›´æ¥åœ¨å®šä¹‰æ—¶å°†rå®šä¹‰ä¸ºlenã€‚ç”±äºmidæ˜¯å‘ä¸‹å–æ•´ï¼Œæ•…midä¸ä¼šè¶Šç•Œã€‚



Â **[Leetcode 436 å¯»æ‰¾å³åŒºé—´ - Medium](https://leetcode-cn.com/problems/find-right-interval/)**

```java
class Solution {
    private int binarySearch(int[] arr, int target) {
        int len = arr.length;
        if(arr[len - 1] < target) return -1;
        int l = 0, r = len - 1;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(arr[mid] >= target) r = mid;//åŒä¸Šï¼Œå¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºè¯¥å€¼çš„ç‚¹
            else l = mid + 1;
        }
        return l;
    }
    
    public int[] findRightInterval(int[][] intervals) {
        int len = intervals.length;
        if(len == 1) return new int[]{-1};
        Map<Integer, Integer> map = new HashMap<>();
        int[] arr = new int[len];
        for(int i = 0; i < len; ++i) {
            map.put(intervals[i][0], i);
            arr[i] = intervals[i][0];
        }
        Arrays.sort(arr);
        int[] res = new int[len];
        for(int i = 0; i < len; ++i) {
            int idx = binarySearch(arr, intervals[i][1]);
            if(idx == -1) res[i] = -1;
            else res[i] = map.get(arr[idx]);
        }
        return res;
    }
}
```

> æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºç›®æ ‡å€¼çš„ç‚¹ï¼Œ**åè¿‡æ¥çœ‹ï¼Œå°äºè¯¥å€¼çš„åŒºé—´å¿…ç„¶ä¸éœ€è¦**   <- 666666

```java
class Solution {    
    public int[] findRightInterval(int[][] intervals) {
        int len = intervals.length;
        if(len == 0) return new int[0];
        TreeMap<Integer, Integer> map = new TreeMap<>();
        for(int i = 0; i < len; ++i) map.put(intervals[i][0], i);
        int[] res = new int[len];
        for(int i = 0; i < len; ++i) {
            Map.Entry<Integer, Integer> entry = map.ceilingEntry(intervals[i][1]);
            if(entry == null) res[i] = -1;
            else res[i] = entry.getValue();
        }
        return res;
    }
}
```

> TreeMapåšæ³•



#### 3.2.2 æ—‹è½¬æœ‰åºæ•°ç»„æœç´¢



**[Leetcode 33 æœç´¢æ—‹è½¬æ’åºæ•°ç»„ - Medium](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)**

```java
class Solution {
    public int search(int[] nums, int target) {
        int l = 0, r = nums.length - 1;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] == target) return mid;
            if(target > nums[r]) {
                if(nums[mid] > nums[r]) {
                    if(nums[mid] > target) {
                        r = mid - 1;
                    }else {
                        l = mid + 1;
                    }
                }else {
                    r = mid - 1;
                }
            }else if(target < nums[r]) {
                if(nums[mid] < nums[r]) {
                    if(nums[mid] > target) {
                        r = mid - 1;
                    }else {
                        l = mid + 1;
                    }
                }else {
                    l = mid + 1;
                }
            }else return r;
        }
        return nums[l] == target ? l : -1;
    }
}
```

> åˆ†åˆ«æ ¹æ®targetï¼Œnums[mid], ä¸nums[r]çš„å…³ç³»ï¼Œæ¥ç¡®å®šä½äºå·¦åŠæ®µè¿˜æ˜¯å³åŠæ®µã€‚



**[Leetcode 81 æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II - Medium](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/)**

```java
class Solution {
    public boolean search(int[] nums, int target) {
        int len = nums.length, l = 0, r = len - 1;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] == target) return true;
            if(target > nums[r]) {
                if(nums[mid] > nums[r]) {
                    if(target > nums[mid]) {
                        l = mid + 1;
                    }else {
                        r = mid - 1;
                    }
                }else if(nums[mid] < nums[r]) {
                    r = mid - 1;
                }else {
                    --r;//**å½“nums[mid] == nums[r]æ—¶ï¼Œè¾¹ç•Œå·¦ç§»ã€‚
                }
            }else if(target < nums[r]) {
                if(nums[mid] > nums[r]) {
                    l = mid + 1;
                }else if(nums[mid] < nums[r]) {
                    if(target > nums[mid]) {
                        l = mid + 1;
                    }else {
                        r = mid - 1;
                    }
                }else {
                    --r;//**
                }
            }else return true;
        }
        return nums[l] == target;//ç”±äºæ‰¾åˆ°å³é€€å‡ºï¼Œéœ€è¦ç¡®å®šæœ€åçš„å€¼æ˜¯å¦æ˜¯target
    }
}
```

> å½“nums[mid] == nums[r]æ—¶ï¼Œç”±äºæ¯æ¬¡æ¯”è¾ƒéƒ½æ˜¯ä»¥å³è¾¹ç•Œä½œä¸ºåŸºå‡†ï¼Œç°åœ¨å’ŒåŸºå‡†å€¼ç›¸åŒï¼Œåè€Œä¸çŸ¥é“nums[mid]æ˜¯ä½äºå·¦åŠè¾¹è¿˜æ˜¯å³åŠè¾¹äº†ã€‚
>
> è¿™æ—¶å€™ï¼Œå°†r--ï¼Œ10111ï¼Œè¿™ç§midåœ¨å³è¾¹ç•Œï¼Œå¦‚æœmidåœ¨å³è¾¹ç•Œï¼Œé‚£ä¹ˆmidå’Œrä¹‹é—´å¿…ç„¶å…¨æ˜¯ç›¸ç­‰çš„å€¼ï¼Œr--ä¸å½±å“ç»“æœï¼›
>
> 11101,è¿™ç§midåœ¨å·¦è¾¹ç•Œï¼Œmidå’Œrä¹‹é—´ä¸€å®šæœ‰å°äºnums[r]çš„å€¼ï¼Œé‚£ä¹ˆå»æ‰åç»§ç»­ç¡®å®šå…¶ä½™ç‚¹å°±å¥½äº†ã€‚



**[Leetcode 153 å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼- Medium](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/)**

```java
class Solution {
    public int findMin(int[] nums) {
        int l = 0, r = nums.length - 1;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] > nums[r]) l = mid + 1;//1
            else r = mid; //2
        }
        return nums[l];
    }
}
```

> å¦‚æœæ—‹è½¬å¶æ•°æ¬¡ï¼Œåˆ™ä¸€ç›´èµ°ç¬¬äºŒç§æƒ…å†µï¼Œæœ€åè¾“å‡ºnums[0];
>
> å¦‚æœæ—‹è½¬å¥‡æ•°æ¬¡ï¼Œåˆ™å…ˆè¿‡æ¸¡åˆ°å³åŠè¾¹ï¼Œç„¶åå†èµ°ç¬¬äºŒç§æƒ…å†µï¼Œæœ€åè¾“å‡ºnums[min];



**[Leetcode 154 å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼II - Hard](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/)**

```java
class Solution {
    public int findMin(int[] nums) {
        int l = 0, r = nums.length - 1;
        while(l < r) {
            int mid = l + (r - l) / 2;
            if(nums[mid] > nums[r]) {
                l = mid + 1;
            }else if(nums[mid] < nums[r]) {
                r = mid;
            }else --r;
        }
        return nums[l];
    }
}
```

> å’Œä¸Šæ–‡æ€è·¯é›·åŒ



#### 3.2.3 å…¶ä»–

**[Leetcode 540 æœ‰åºæ•°ç»„ä¸­çš„å•ä¸€å…ƒç´  - Medium](https://leetcode-cn.com/problems/single-element-in-a-sorted-array/)**

```java
class Solution {
    public int singleNonDuplicate(int[] nums) {
        int l = 0, r = nums.length - 1;
        while(l < r) {
            int tmp = l + (r - l) / 2;
            int mid = tmp % 2 == 0 ? tmp : tmp - 1;
            if(nums[mid] == nums[mid + 1]) l = mid + 2;
            else r = mid;
        }
        return nums[l];
    }
}
```

> å•ä¸€å…ƒç´ åªèƒ½å‡ºç°åœ¨å¶æ•°ä½
>
> å¦å¤–è¿™ä¸ªtmp - 1 æ¢æˆtmp + 1å°±ä¼šæ­»å¾ªç¯
>
> ğŸŒ°ï¼š[1,1,2,3,3,4,4,8,8]  æœ€ååŒºé—´ä¸º[1,1,2],å¦‚æœæ¡ä»¶æ˜¯tmp + 1ï¼Œé‚£ä¹ˆmid = 2ï¼Œræœ€åè¿˜æ˜¯2ï¼Œæ­»å¾ªç¯ã€‚
>
> å¦‚æœæ˜¯tmp - 1ï¼Œç”±äº/ 2çš„å‘ä¸‹å–æ•´ç‰¹æ€§ï¼Œå¯ä»¥ä¿è¯mid + 1ï¼Œå¿…å®šæ˜¯[l, r]åŒºé—´å†…çš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥è·³å‡ºå¾ªç¯ã€‚



**[Leetcode 4 å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•° - Hard](https://leetcode-cn.com/problems/median-of-two-sorted-arrays/)**

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        if(nums1.length > nums2.length) {
            int[] tmp = nums1;
            nums1 = nums2;
            nums2 = tmp;
        }
        int m = nums1.length, n = nums2.length;
        int totalLeft = (m + n + 1) / 2;
        //å¦‚æœm+nä¸ºå¶æ•°ï¼Œ+1ä¸å½±å“ï¼Œå¦‚æœm+nä¸ºå¥‡æ•°ï¼Œè®©å·¦è¾¹å¤šä¸€ä¸ªæ•°ã€‚+1å®ç°å¥‡å¶é€»è¾‘ç»Ÿè®¡
        
        //åœ¨nums1çš„[0,m]åŒºé—´å†…å¯»æ‰¾åˆ†å‰²çº¿
        //iè¡¨ç¤ºnums1åˆ†å‰²çº¿å³è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œä¹Ÿå³nums1ä¸­åˆ†å‰²çº¿å·¦è¾¹å…ƒç´ çš„ä¸ªæ•°
        //jè¡¨ç¤ºnums2åˆ†å‰²çº¿å³è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œä¹Ÿå³nums2ä¸­åˆ†å‰²çº¿å·¦è¾¹å…ƒç´ çš„ä¸ªæ•°
        //i + j = totalLeft;
        //ä½¿å¾—nums1[i - 1] <= nums2[j] * && nums2[j - 1] <= nums1[i] **  ----***
        int l = 0, r = m;
        while(l < r) {
            int i = l + (r - l + 1) / 2;
            int j = totalLeft - i;
            
            //å½“ä¸æ»¡è¶³***æ¡ä»¶æ—¶ï¼ŒæŒ‡é’ˆç§»åŠ¨ï¼Œ***å–åï¼Œå³å¯ä»¥*å–å || **å–å
            //å› ä¸ºiå’Œjæ»¡è¶³ç­‰å¼å…³ç³»ï¼Œæ‰€ä»¥åªé€‰å…¶ä¸­ä¸€ä¸ªå–åå³å¯ï¼Œè¿™é‡Œé€‰æ‹©*å–å
            if(nums1[i - 1] > nums2[j]) {
                //ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯[l, i - 1];
                r = i - 1;//è¿™é‡Œæ˜¯i - 1è€Œä¸æ˜¯i - 2ï¼Œæ˜¯å› ä¸ºæœ€åè¿”å›çš„æ˜¯içš„åæ ‡ã€‚
            }else {
                l = i;//è¿™é‡Œä¼šé€ æˆæ­»å¾ªç¯ï¼Œæ›´æ”¹ä¸Šé¢içš„è¡¨è¾¾å¼ä¸º i = l + (r - l + 1) / 2
                //ç”±äºiæ”¹äº†è¡¨è¾¾å¼ï¼Œæ‰€ä»¥iä¸å¯èƒ½ä¸º0ï¼Œæ‰€ä»¥nums[i - 1]ä¸ä¼šè¶Šç•Œ
            }
        }
        int i = l;
        int j = totalLeft - i;
        int nums1LeftMax  = i == 0 ? Integer.MIN_VALUE : nums1[i - 1];
        int nums1RightMin = i == m ? Integer.MAX_VALUE : nums1[i];
        int nums2LeftMax  = j == 0 ? Integer.MIN_VALUE : nums2[j - 1];
        int nums2RightMin = j == n ? Integer.MAX_VALUE : nums2[j];
        
        if((m + n) % 2 == 1) {
            return (double)Math.max(nums1LeftMax, nums2LeftMax);
        }else {
            return (double)(Math.max(nums1LeftMax, nums2LeftMax) + Math.min(nums1RightMin, nums2RightMin)) / 2.0;
        }
    }
}
```

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        if(nums1.length > nums2.length) {
            int[] tmp = nums1;
            nums1 = nums2;
            nums2 = tmp;
        }
        int m = nums1.length, n = nums2.length;
        int totalLeft = (m + n + 1) / 2;
        //å¦‚æœm+nä¸ºå¶æ•°ï¼Œ+1ä¸å½±å“ï¼Œå¦‚æœm+nä¸ºå¥‡æ•°ï¼Œè®©å·¦è¾¹å¤šä¸€ä¸ªæ•°ã€‚+1å®ç°å¥‡å¶é€»è¾‘ç»Ÿè®¡
        
        //åœ¨nums1çš„[0,m]åŒºé—´å†…å¯»æ‰¾åˆ†å‰²çº¿
        //iè¡¨ç¤ºnums1åˆ†å‰²çº¿å³è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œä¹Ÿå³nums1ä¸­åˆ†å‰²çº¿å·¦è¾¹å…ƒç´ çš„ä¸ªæ•°
        //jè¡¨ç¤ºnums2åˆ†å‰²çº¿å³è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ï¼Œä¹Ÿå³nums2ä¸­åˆ†å‰²çº¿å·¦è¾¹å…ƒç´ çš„ä¸ªæ•°
        //i + j = totalLeft;
        //ä½¿å¾—nums1[i - 1] <= nums2[j] * && nums2[j - 1] <= nums1[i] **  ----***
        int l = 0, r = m;
        while(l < r) {
            int i = l + (r - l) / 2;
            int j = totalLeft - i;
            
            //å½“ä¸æ»¡è¶³***æ¡ä»¶æ—¶ï¼ŒæŒ‡é’ˆç§»åŠ¨ï¼Œ***å–åï¼Œå³å¯ä»¥*å–å || **å–å
            //å› ä¸ºiå’Œjæ»¡è¶³ç­‰å¼å…³ç³»ï¼Œæ‰€ä»¥åªé€‰å…¶ä¸­ä¸€ä¸ªå–åå³å¯ï¼Œè¿™é‡Œé€‰æ‹©*å–å
            if(nums2[j - 1] > nums1[i]) {
                //ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯[i + 1, r];
                l = i + 1;
            }else {
                r = i;//è¿™é‡Œä¸ä¼šé€ æˆæ­»å¾ªç¯ï¼Œæ›´æ”¹ä¸Šé¢içš„è¡¨è¾¾å¼ä¸º i = l + (r - l) / 2
                //ç”±äºiæ˜¯ä¸‹å–æ•´ï¼Œæ‰€ä»¥iä¸å¯èƒ½å–åˆ°mï¼Œæ‰€ä»¥nums[i]ä¸ä¼šè¶Šç•Œã€‚ç”±äºiä¸ä¸ºmï¼Œæ‰€ä»¥jä¸å¯èƒ½ä¸º0
            }
        }
        int i = l;
        int j = totalLeft - i;
        int nums1LeftMax  = i == 0 ? Integer.MIN_VALUE : nums1[i - 1];
        int nums1RightMin = i == m ? Integer.MAX_VALUE : nums1[i];
        int nums2LeftMax  = j == 0 ? Integer.MIN_VALUE : nums2[j - 1];
        int nums2RightMin = j == n ? Integer.MAX_VALUE : nums2[j];
        
        if((m + n) % 2 == 1) {
            return (double)Math.max(nums1LeftMax, nums2LeftMax);
        }else {
            return (double)(Math.max(nums1LeftMax, nums2LeftMax) + Math.min(nums1RightMin, nums2RightMin)) / 2.0;
        }
    }
}
```

![leetcode 4 é¢˜å›¾ï¼šiå’Œjçš„è¾¹ç•Œæ¡ä»¶](../z.images/leetcode4.png)

>  å¹¿ä¹‰åˆ†å‰²çº¿ï¼Œå°†ä¸¤ä¸ªæ•°ç»„åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦éƒ¨ <= å³éƒ¨ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(log(min(m, n))).



